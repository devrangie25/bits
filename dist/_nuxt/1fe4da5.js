(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{745:function(e,t,r){"use strict";r.r(t);var n=r(72),o=r(3),c=r(14);r(65),r(13),r(4),r(64),r(12),r(11),r(10),r(15),r(16);function l(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function d(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var f={layout:"loggedin",middleware:"secure",data:function(){return{search:"",status:"",dateTo:"",dateFrom:"",statusItems:["Order Created","In Transit","Picked Up","Dropped Off","Unsuccessful Delivery"],headers:[{text:"Reference Number",value:"reference_number"},{text:"Sender",value:"sender_name"},{text:"Receiver",value:"receiver_name"},{text:"Amount (â‚±)",value:"total"},{text:"Date Created",value:"created_on"},{text:"Status",value:"status"}],finalArr:[],cloneArr:[],rules:{required:function(e){return!!e||"Required field"}}}},mounted:function(){this.getParcelShippingDetails()},computed:{storeParcels:function(){return this.$store.state.parcels.parcels}},methods:{reset:function(){this.$refs.form.resetValidation(),this.finalArr=this.cloneArr,this.dateTo="",this.dateFrom="",this.status=""},viewReport:function(){var e=this;this.$refs.form.validate()&&(this.finalArr=this.finalArr.filter((function(t){return e.$dayjs(t.created_on).isBetween(e.dateFrom,e.dateTo,null,"[]")&&t.status===e.status})))},total:function(e){return e.reduce((function(e,t){return e+t}),0)},getShippingProducts:function(e){var t=this;return Object(c.a)(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.$axios.$post("/shipping-details/get-shipping-details-by-parcel",{parcel_id:e});case 3:if(o=r.sent,!((null===(n=o.data)||void 0===n?void 0:n.length)>0)){r.next=6;break}return r.abrupt("return",o.data.map((function(e,i){if(null!==e.product_id)return e})).filter((function(e){return void 0!==e})));case 6:r.next=11;break;case 8:r.prev=8,r.t0=r.catch(0),console.error("error",r.t0);case 11:case"end":return r.stop()}}),r,null,[[0,8]])})))()},getParcelShippingDetails:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{e.storeParcels.length>0&&(r=[],e.storeParcels.forEach(function(){var t=Object(c.a)(regeneratorRuntime.mark((function t(o){var c,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getShippingProducts(o.parcel_id);case 2:(null==(c=t.sent)?void 0:c.length)>0?(l=c.map((function(e){if(e&&e.parcel_id===o.parcel_id)return e})),r.push(d(d({},o),{},{products:l})),e.finalArr=r.filter((function(e,t){return r.indexOf(e)===t})),e.cloneArr=Object(n.a)(e.finalArr)):(r.push(d(d({},o),{},{products:[]})),e.finalArr=r.filter((function(e,t){return r.indexOf(e)===t})),e.cloneArr=Object(n.a)(e.finalArr));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))}catch(e){console.error("error",e)}case 1:case"end":return t.stop()}}),t)})))()}}},v=f,m=r(30),h=r(31),y=r.n(h),_=r(240),x=r(225),w=r(92),O=r(646),j=r(737),k=r(648),P=r(226),R=r(649),V=r(686),A=r(652),C=r(147),T=r(63),S=r(192),component=Object(m.a)(v,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"parcel-container"},[r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("v-card",{staticClass:"pa-6",attrs:{flat:"",rounded:"lg"}},[r("v-card-text",[r("v-form",{ref:"form"},[r("v-row",[r("v-col",{attrs:{cols:"12",md:"3"}},[r("v-select",{attrs:{items:e.statusItems,outlined:"",dense:"","hide-details":"",label:"Status",rules:[e.rules.required]},model:{value:e.status,callback:function(t){e.status=t},expression:"status"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",md:"3"}},[r("v-text-field",{attrs:{type:"date",outlined:"",dense:"","hide-details":"",label:"From",rules:[e.rules.required]},model:{value:e.dateFrom,callback:function(t){e.dateFrom=t},expression:"dateFrom"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",md:"3"}},[r("v-text-field",{attrs:{type:"date",outlined:"",dense:"","hide-details":"",label:"To",rules:[e.rules.required]},model:{value:e.dateTo,callback:function(t){e.dateTo=t},expression:"dateTo"}})],1),e._v(" "),r("v-col",{staticClass:"d-flex justify-space-between",attrs:{cols:"12",md:"3"}},[r("v-btn",{staticClass:"text-capitalize mr-1",attrs:{depressed:"",color:"primary",width:"50%",height:"40"},on:{click:e.viewReport}},[e._v("\n                                        View Report\n                                    ")]),e._v(" "),r("v-btn",{staticClass:"text-capitalize ml-1",attrs:{depressed:"",color:"secondary",width:"50%",height:"40"},on:{click:e.reset}},[e._v("\n                                        Reset\n                                    ")])],1)],1)],1)],1)],1)],1),e._v(" "),r("v-col",{attrs:{cols:"12"}},[r("v-card",{staticClass:"pa-6",attrs:{rounded:"lg",flat:""}},[r("v-data-table",{staticClass:"transparent rounded-lg",attrs:{headers:e.headers,items:e.finalArr,"sort-by":"parcel_id",search:e.search},scopedSlots:e._u([{key:"top",fn:function(){return[r("v-toolbar",{attrs:{flat:"",rounded:"lg"}},[r("v-toolbar-title",[e._v("Reports")]),e._v(" "),e._l(6,(function(i){return r("v-spacer",{key:i})})),e._v(" "),r("v-text-field",{staticClass:"mr-n4",attrs:{"append-icon":"mdi-magnify",label:"Search",outlined:"",dense:"","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],2)]},proxy:!0},{key:"item.created_on",fn:function(t){var r=t.item;return[e._v("\n                            "+e._s(e.$dayjs(r.created_on).format("MM/DD/YYYY"))+"\n                        ")]}},{key:"item.total",fn:function(t){var r=t.item;return[e._v("\n                            "+e._s(e.total(r.products.map((function(e){return+e.total}))))+"\n                        ")]}},{key:"item.actions",fn:function(t){t.item;return[r("v-icon",{staticClass:"mr-2",attrs:{small:"",color:"orange"}},[e._v("\n                                mdi-eye\n                            ")])]}}])})],1)],1)],1)],1)])}),[],!1,null,null,null);t.default=component.exports;y()(component,{VBtn:_.a,VCard:x.a,VCardText:w.c,VCol:O.a,VDataTable:j.a,VForm:k.a,VIcon:P.a,VRow:R.a,VSelect:V.a,VSpacer:A.a,VTextField:C.a,VToolbar:T.a,VToolbarTitle:S.a})}}]);